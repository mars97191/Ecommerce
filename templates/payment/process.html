{% extends 'base.html' %}

{% block content %}

    <main class="main__content_wrapper">

        <!-- Start checkout page area -->
        <div class="checkout__page--area section--padding">
            <div class="container">
                <div class="row">
                    <div class="col-lg-7 col-md-6">
                        <div class="main checkout__mian">
                            <div class="checkout__content--step section__contact--information">
                                <div class="section__header checkout__section--header d-flex align-items-center justify-content-between mb-25">
                                    <h2 class="section__header--title h3">Контактная информация</h2>
                                </div>

                            </div>
                            <form id="form" method="post">
                                <div>
                                </div>
                                <div class="checkout__content--step section__shipping--address">
                                    <div class="section__shipping--address__content">
                                        <div class="row">
                                            <div class="col-lg-6 mb-20">
                                                <div class="checkout__input--list">
                                                    <label class="checkout__input--label mb-4"
                                                           for="country">ФИО:</label>
                                                    <input class="checkout__input--field border-radius-5"
                                                           id="state" type="text" placeholder="Country"
                                                           autocomplete="off"
                                                           value="{{ order.first_name }} {{ order.last_name }} "
                                                           readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 mb-20">
                                                <div class="checkout__input--list">
                                                    <label class="checkout__input--label mb-4"
                                                           for="country">Email:</label>
                                                    <input class="checkout__input--field border-radius-5"
                                                           id="state" type="text" placeholder="Country"
                                                           autocomplete="off"
                                                           value="{{ order.email }} " readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 mb-20">
                                                <div class="checkout__input--list">
                                                    <label class="checkout__input--label mb-4"
                                                           for="country">Город:</label>
                                                    <input class="checkout__input--field border-radius-5"
                                                           id="state" type="text" placeholder="Country"
                                                           autocomplete="off"
                                                           value="{{ order.city }} " readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 mb-20">
                                                <div class="checkout__input--list">
                                                    <label class="checkout__input--label mb-4"
                                                           for="state">Адрес:</label>
                                                    <input
                                                            class="checkout__input--field border-radius-5"
                                                            id="state" type="text" placeholder="Country"
                                                            autocomplete="off"
                                                            value="{{ order.address }}" readonly>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>


                    <div class="col-lg-5 col-md-6">
                        <aside class="checkout__sidebar sidebar border-radius-10">
                            <h2 class="checkout__order--summary__title text-center mb-15">Ваш заказ</h2>

                            {% for item in order.items.all %}

                                <div class="cart__table checkout__product--table">
                                    <table class="cart__table--inner">
                                        <tbody class="cart__table--body">
                                        <tr class="cart__table--body__items">
                                            <td class="cart__table--body__list">
                                                <div class="product__image two  d-flex align-items-center">
                                                    <div class="product__thumbnail border-radius-5">
                                                        <a class="display-block"
                                                           href=""><img
                                                                class="display-block border-radius-5"
                                                                src="{{ item.product.main_image.url }}"
                                                                alt="cart-product"></a>
                                                        <span class="product__thumbnail--quantity">{{ item.quantity }}</span>
                                                    </div>
                                                    <div class="product__description">
                                                        <h4 class="product__description--name"><a
                                                                href="">{{ item.name }}</a>
                                                        </h4>

                                                    </div>
                                                </div>
                                            </td>
                                            <td class="cart__table--body__list">

                                                <span class="cart__price">₽ {{ item.price|floatformat:1 }}</span>
                                                <h6>(за 1 шт.)</h6>
                                            </td>
                                            <td class="cart__table--body__list">

                                                <span class="cart__price">₽ {{ item.get_cost }}</span>

                                            </td>
                                        </tr>

                                        </tbody>
                                    </table>
                                </div>

                            {% endfor %}

                            <div class="checkout__total">
                                <table class="checkout__total--table">


                                    <tbody class="checkout__total--body">

                                    <tr class="checkout__total--items">
                                        <td class="checkout__total--title text-left">Сумма</td>
                                        <td class="checkout__total--amount text-right">

                                            {{ order.get_total_cost_before_discount }} ₽
                                        </td>

                                    </tr>
                                    {% if cart.coupon %}
                                        <tr class="checkout__total--items">
                                            <td class="checkout__total--title text-left">Скидка</td>
                                            <td class="checkout__total--calculated__text text-right">
                                                - {{ order.get_discount|floatformat:2 }} ₽ ({{ cart.coupon.discount }}%)
                                            </td>
                                        </tr>
                                    {% else %}
                                        <tr class="checkout__total--items">
                                        <td class="checkout__total--title text-left">Скидка</td>
                                        <td class="checkout__total--calculated__text text-right">

                                            - {{ order.get_discount|floatformat:2 }}
                                        </td>

                                    {% endif %}


                                    <tfoot class="checkout__total--footer">
                                    <tr class="checkout__total--footer__items">
                                        <td class="checkout__total--footer__title checkout__total--footer__list text-left">
                                            Общая сумма
                                        </td>
                                        <td class="checkout__total--footer__amount checkout__total--footer__list text-right">
                                            {{ order.get_total_cost|floatformat:2 }} ₽
                                        </td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                            <div class="payment__history mb-30">
                                <h3 class="payment__history--title mb-20">Payment</h3>
                                <ul class="payment__history--inner d-flex">
                                    <li class="payment__history--list">
                                        <form action="{% url 'payment:process' %}" method="post">
                                            <button class="payment__history--link primary__btn" type="submit">Credit
                                                Card
                                            </button>
                                            {% csrf_token %}
                                        </form>

                                    </li>
                                    <li class="payment__history--list">
                                        <button class="payment__history--link primary__btn" type="submit">Bank
                                            Transfer
                                        </button>
                                    </li>
                                    <li class="payment__history--list">
                                        <button class="payment__history--link primary__btn" type="submit">Paypal
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </aside>
                    </div>

                </div>
            </div>
        </div>
    </main>
{% endblock %}
